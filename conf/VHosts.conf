<IfModule mod_ssl.c>
<Macro VHost $host $port $dir $phpversion>
	<VirtualHost *:$port>
		ServerName $host
		ServerAlias www.$host
		ServerAdmin webmaster@$host
		DocumentRoot $dir
			
		<Directory $dir>
			Options Indexes FollowSymLinks MultiViews
			AllowOverride All
			Require all granted
			Order Allow,Deny
			Allow from All
		</Directory>

		<FilesMatch \.php$>
			SetHandler "proxy:unix:/run/php/php$phpversion-fpm.sock|fcgi://localhost"
		</FilesMatch>

		ServerSignature Off 
		
		LogLevel error warn

		ErrorLog ${APACHE_LOG_DIR}/$host-error.log
		CustomLog ${APACHE_LOG_DIR}/$host-access.log combined
	</VirtualHost>
</Macro>
</ifModule>
